<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Boldog sz√ºlinapot, Zibu!</title>
<style>
  :root{
    --bg:#a8e6cf;
    --accent:#ff66cc;
    --footer:#3498db;
  }
  html,body{margin:0;padding:0;font-family:Inter, "Segoe UI", Roboto, Arial, sans-serif;background:var(--bg);color:#111;}
  .wrap{max-width:1200px;margin:0 auto;padding:40px;}
  .birthday-center{display:flex;flex-direction:column;align-items:center;gap:18px;text-align:center;padding:20px 0 30px;}
  .avatar{width:120px;height:120px;border-radius:50%;overflow:hidden;border:4px solid rgba(0,0,0,0.08);box-shadow:0 6px 18px rgba(0,0,0,0.12);background:#fff;}
  .avatar img{width:100%;height:100%;object-fit:cover;display:block;}
  h1{margin:0;font-size:32px;color:#063; text-shadow:0 1px 0 rgba(255,255,255,0.4);}
  #musicBtn{padding:10px 22px;border-radius:999px;border:0;background:var(--accent);color:#fff;font-weight:700;cursor:pointer;box-shadow:0 6px 14px rgba(0,0,0,0.12);}
  #musicBtn:hover{transform:scale(1.03);}

  /* gal√©ria */
  .image-row{display:flex;flex-wrap:wrap;gap:12px;justify-content:center;}
  .image-box, .media-box{width:320px;height:220px;border-radius:12px;overflow:hidden;background:#ddd;flex-shrink:0;cursor:pointer;display:flex;align-items:center;justify-content:center;position:relative}
  .image-box img, .media-box img, .media-box video{width:100%;height:100%;object-fit:cover;display:block;}

  /* play overlay (ikon) */
  .media-box .play-overlay{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);pointer-events:none;font-size:48px;color:rgba(255,255,255,0.95);text-shadow:0 4px 12px rgba(0,0,0,0.5)}

  /* modal (lightbox) */
  .modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.85);z-index:12000;align-items:center;justify-content:center;padding:20px}
  .modal.open{display:flex}
  .modal-content{max-width:95%;max-height:95%;display:flex;align-items:center;justify-content:center;position:relative}
  .modal img, .modal video{max-width:100%;max-height:100%;border-radius:10px;display:block}
  .modal .close{position:absolute;right:-6px;top:-6px;background:transparent;color:#fff;font-size:40px;border:0;cursor:pointer;padding:6px 10px}
  /* footer */
  .love-footer{width:100%;height:56px;background:var(--footer);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;position:relative;margin-top:28px;border-radius:6px;}
  /* confetti canvas */
  .confetti{position:fixed;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:1000}
  /* responsive */
  @media (max-width:780px){ .image-box,.media-box{width:45vw;height:32vw} }
  @media (max-width:420px){ .image-box,.media-box{width:90vw;height:60vw} }
</style>
</head>
<body>
  <div class="wrap">
    <!-- audio (helyi f√°jl neve legyen pontos) -->
    <audio id="bgmusic" loop>
      <source src="szulinap.mp3" type="audio/mpeg">
    </audio>

    <!-- k√∂z√©ps≈ë blokk -->
    <div class="birthday-center">
      <div class="avatar" aria-hidden="true">
        <img src="https://media.giphy.com/media/kL1KAdQYmKXle/giphy.gif" alt="avatar">
      </div>
      <h1>Boldog sz√ºlinapot, Dombor! üéâ</h1>
      <button id="musicBtn" onclick="toggleMusic()">üéµ Ind√≠tsd el a zen√©t</button>
    </div>

    <!-- gal√©ria: k√©pek √©s vide√≥ (cser√©ld a f√°jlneveket sz√ºks√©g szerint) -->
    <div class="image-row" aria-live="polite">
      <div class="image-box"><img src="kep1.jpg" alt="K√©p 1"></div>
      <div class="image-box"><img src="kep2.jpg" alt="K√©p 2"></div>
      <div class="image-box"><img src="kep3.jpg" alt="K√©p 3"></div>
      <div class="image-box"><img src="kep4.jpg" alt="K√©p 4"></div>

      <!-- vide√≥ el≈ën√©zet: kattintva modalban indul el -->
      <div class="media-box" data-type="video">
        <video class="media-video" preload="metadata" poster="boritokep.jpg">
          <source src="video.mp4" type="video/mp4">
        </video>
        <div class="play-overlay">‚ñ∂</div>
      </div>

      <!-- tov√°bbi k√©pek -->
      <div class="image-box"><img src="kep5.jpg" alt="K√©p 5"></div>
      <div class="image-box"><img src="kep6.jpg" alt="K√©p 6"></div>
    </div>

    <div class="love-footer">üéÇ K√©sz√ºlt sok szeretettel, Lilla √©s Krist√≥f üéÇ</div>
  </div>

  <!-- modal (egyes√≠tett k√©p/vide√≥) -->
  <div id="mediaModal" class="modal" aria-hidden="true" role="dialog" aria-label="M√©dia megtekint√©se">
    <div class="modal-content">
      <button class="close" aria-label="Bez√°r√°s">&times;</button>
      <img id="modalImage" src="" alt="" style="display:none">
      <video id="modalVideo" controls style="display:none">
        <source id="modalVideoSource" src="" type="video/mp4">
        A b√∂ng√©sz≈ëd nem t√°mogatja a vide√≥lej√°tsz√°st.
      </video>
    </div>
  </div>

  <!-- confetti canvas -->
  <canvas id="confettiCanvas" class="confetti" aria-hidden="true"></canvas>

<script>
/* --- ALAP FUNKCI√ìK --- */
function toggleMusic(){
  const audio = document.getElementById('bgmusic');
  const btn = document.getElementById('musicBtn');
  if(!audio) return;
  if(audio.paused){ audio.play().catch(e=>console.log('Autoplay blokk:',e)); btn.textContent="üîá Kapcsold ki a zen√©t"; }
  else { audio.pause(); btn.textContent="üéµ Ind√≠tsd el a zen√©t"; }
}

/* --- DOMREADY: csak itt inicializ√°ljuk a modal m≈±veleteket --- */
window.addEventListener('DOMContentLoaded', ()=>{

  const modal = document.getElementById('mediaModal');
  const modalImg = document.getElementById('modalImage');
  const modalVideo = document.getElementById('modalVideo');
  const modalVideoSource = document.getElementById('modalVideoSource');
  const closeBtn = modal.querySelector('.close');

  function openModalForImage(src){
    modalImg.src = src;
    modalImg.style.display = 'block';
    modalVideo.style.display = 'none';
    modalVideo.pause?.();
    modalVideoSource.src = '';
    modal.classList.add('open');
    modal.setAttribute('aria-hidden','false');
  }
  function openModalForVideo(src){
    modalVideoSource.src = src;
    modalVideo.load();
    modalImg.style.display = 'none';
    modalVideo.style.display = 'block';
    modal.classList.add('open');
    modal.setAttribute('aria-hidden','false');
    // j√°t√©k: play, fogja a promise hib√°t ha a b√∂ng√©sz≈ë tiltja (de kattint√°skor nem k√©ne)
    modalVideo.play().catch(err=>{
      console.warn('Video play hiba (lehet autoplay szab√°ly):', err);
    });
  }
  function closeModal(){
    modal.classList.remove('open');
    modal.setAttribute('aria-hidden','true');
    // √°ll√≠tsd le a vide√≥t √©s √ºr√≠tsd a source-t, hogy a b√∂ng√©sz≈ë felszabad√≠tsa a mem√≥ri√°t
    try{ modalVideo.pause(); modalVideo.currentTime = 0; }catch(e){}
    modalVideoSource.src = '';
    modalImg.src = '';
  }

  // k√©pekre kattint√°s
  document.querySelectorAll('.image-box img').forEach(img=>{
    img.addEventListener('click', (e)=>{
      openModalForImage(img.src);
    });
  });

  // vide√≥kra kattint√°s (a .media-box-ot is kezelj√ºk, ha m√°shol kattint a user)
  document.querySelectorAll('.media-box').forEach(box=>{
    box.addEventListener('click', (e)=>{
      // keress√ºk meg a source URL-t a video elemben (ha nincs, megpr√≥b√°ljuk a data-src-t)
      const vid = box.querySelector('video');
      if(vid){
        const s = vid.querySelector('source');
        const src = (s && s.src) ? s.src : vid.currentSrc;
        if(src) openModalForVideo(src);
        else console.warn('Nincs video forr√°s be√°ll√≠tva a media-box-ban.');
      }
    });
  });

  // close gomb
  closeBtn.addEventListener('click', closeModal);
  // h√°tt√©rre kattintva bez√°r√°s
  modal.addEventListener('click', (e)=>{
    if(e.target === modal) closeModal();
  });
  // ESC gomb
  document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeModal(); });

}); // DOMContentLoaded

/* --- Konfetti (folyamatos) --- */
(function(){
  const canvas = document.getElementById('confettiCanvas');
  const ctx = canvas.getContext('2d');
  let W = canvas.width = window.innerWidth;
  let H = canvas.height = window.innerHeight;
  let parts = [];
  const colors = ['#ff6fb5','#6bffda','#ffd166','#9ad0f5','#c792ff'];

  function make(){
    parts = [];
    for(let i=0;i<140;i++){
      parts.push({
        x: Math.random()*W,
        y: Math.random()*-H,
        r: 4 + Math.random()*8,
        vx: (Math.random()-0.5)*2,
        vy: 2 + Math.random()*4,
        color: colors[Math.floor(Math.random()*colors.length)],
        tilt: Math.random()*0.6
      });
    }
  }
  function update(){
    for(let p of parts){
      p.x += p.vx; p.y += p.vy; p.tilt += 0.06;
      if(p.y > H + 30){ p.x = Math.random()*W; p.y = -20 - Math.random()*H; }
    }
  }
  function draw(){
    ctx.clearRect(0,0,W,H);
    for(let p of parts){
      ctx.fillStyle = p.color;
      ctx.beginPath();
      ctx.ellipse(p.x,p.y,p.r,p.r*0.6,p.tilt,0,Math.PI*2);
      ctx.fill();
    }
  }
  function loop(){
    update(); draw(); requestAnimationFrame(loop);
  }
  window.addEventListener('resize', ()=>{ W = canvas.width = window.innerWidth; H = canvas.height = window.innerHeight; make(); });
  make(); loop();
})();

</script>
</body>
</html>
